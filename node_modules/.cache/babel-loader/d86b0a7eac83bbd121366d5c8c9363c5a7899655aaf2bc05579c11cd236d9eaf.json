{"ast":null,"code":"import _objectSpread from\"C:/Users/alex/Documents/Python/CSConnect/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginScreen(_ref){let{onLogin,onRegister}=_ref;const[titleOffset,setTitleOffset]=useState(0);const[showForgot,setShowForgot]=useState(false);const[forgotEmail,setForgotEmail]=useState('');const[forgotMsg,setForgotMsg]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[loginType,setLoginType]=useState('analista');const[adminMode,setAdminMode]=useState(false);useEffect(()=>{if(typeof window==='undefined'||typeof window.matchMedia!=='function')return;const mm=window.matchMedia('(min-width: 768px)');const update=()=>setTitleOffset(mm.matches?-36:-12);update();if(mm.addEventListener)mm.addEventListener('change',update);else mm.addListener(update);return()=>{if(mm.removeEventListener)mm.removeEventListener('change',update);else mm.removeListener(update);};},[]);async function handleForgotSubmit(){setForgotMsg('');if(!forgotEmail){setForgotMsg('E-mail obrigatório.');return;}try{const res=await fetch('/api/recuperar-senha',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:forgotEmail})});const data=await res.json().catch(()=>null);if(res.ok&&data&&data.message)setForgotMsg('Se o e-mail estiver cadastrado e autorizado, você receberá instruções para redefinir sua senha.');else if(res.status===404)setForgotMsg('E-mail não encontrado ou não autorizado.');else if(data&&data.error)setForgotMsg(data.error);else setForgotMsg('Erro ao processar solicitação. Tente novamente.');}catch(err){setForgotMsg('Erro ao processar solicitação. Tente novamente.');}}async function handleSubmit(e){e.preventDefault();setError('');let emailToValidate=email;if(loginType==='analista'||adminMode)emailToValidate=\"\".concat(email,\"@ceosoftware.com.br\");if(!email||!password){setError('Preencha todos os campos!');return;}if((loginType==='analista'||adminMode)&&!emailToValidate.endsWith('@ceosoftware.com.br')){setError('E-mail deve ser do domínio ceosoftware.com.br');return;}if(adminMode&&emailToValidate!=='admin@ceosoftware.com.br'){setError('Somente o administrador pode acessar por este modo.');return;}try{const res=await fetch('/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:emailToValidate,password})});const data=await res.json().catch(()=>null);if(!res.ok){if(res.status===401)setError('Usuário ou senha inválidos.');else if(res.status===403)setError(data&&data.error||'Usuário não autorizado ou pendente de aprovação.');else setError(data&&data.error||'Erro ao fazer login.');return;}const token=data&&data.token?data.token:null;await onLogin(emailToValidate,password,adminMode?'admin':loginType,token);}catch(err){setError(err.message||'Erro ao fazer login.');}}return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'100vh',backgroundImage:\"linear-gradient(180deg, rgba(15,23,42,0.88), rgba(79,70,229,0.72)), url('/assets/background.jpg')\",backgroundBlendMode:'overlay',backgroundSize:'cover',backgroundPosition:'center',backgroundRepeat:'no-repeat',padding:20},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAdminMode(true),style:{position:'absolute',top:32,right:32,background:adminMode?'#c7d2fe':'#e0e7ff',border:'none',borderRadius:8,padding:10,boxShadow:adminMode?'0 4px 12px rgba(99,102,241,0.18)':'0 2px 8px #cbd5e1',cursor:'pointer',zIndex:101,display:'flex',alignItems:'center',justifyContent:'center'},title:\"\\xC1rea administrativa\",\"aria-expanded\":adminMode,children:/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"admin\",style:{fontSize:22},children:\"\\u2699\\uFE0F\"})}),/*#__PURE__*/_jsx(\"div\",{style:{width:'100%',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',maxWidth:440,background:'rgba(255,255,255,0.92)',padding:28,borderRadius:16,boxShadow:'0 8px 24px rgba(16,24,40,0.08)',backdropFilter:'blur(6px)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{transform:\"translateY(\".concat(titleOffset,\"px)\"),transition:'transform 220ms ease',textAlign:'center',marginBottom:6},children:[/*#__PURE__*/_jsxs(\"h1\",{style:{fontFamily:'Segoe UI, Arial, sans-serif',fontWeight:900,fontSize:36,color:'#0f172a',margin:0,letterSpacing:1},children:[/*#__PURE__*/_jsx(\"span\",{style:{marginRight:8},children:\"\\uD83D\\uDD17\"}),\"CSConnect\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontFamily:'Segoe UI, Arial, sans-serif',fontWeight:500,fontSize:14,color:'#9aa4b2',marginTop:6},children:\"by CEOsoftware\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginBottom:16,justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setLoginType('analista'),style:{padding:'8px 18px',borderRadius:9999,border:'none',cursor:'pointer',fontWeight:loginType==='analista'?'700':'500',background:loginType==='analista'?'linear-gradient(90deg,#4f46e5,#6366f1)':'#f1f5f9',color:loginType==='analista'?'#fff':'#475569',boxShadow:loginType==='analista'?'0 6px 18px rgba(79,70,229,0.16)':'none'},children:\"Analista\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setLoginType('cliente'),style:{padding:'8px 18px',borderRadius:9999,border:'none',cursor:'pointer',fontWeight:loginType==='cliente'?'700':'500',background:loginType==='cliente'?'linear-gradient(90deg,#4f46e5,#6366f1)':'#f1f5f9',color:loginType==='cliente'?'#fff':'#475569',boxShadow:loginType==='cliente'?'0 6px 18px rgba(79,70,229,0.16)':'none'},children:\"Cliente\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:'flex',flexDirection:'column',gap:14,minWidth:280},children:[showForgot&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',inset:0,background:'rgba(51,65,85,0.15)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:10},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff',padding:32,borderRadius:12,boxShadow:'0 2px 16px #cbd5e1',minWidth:320,display:'flex',flexDirection:'column',gap:16},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:22,color:'#334155'},children:\"Recuperar senha\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"forgotEmail\",style:{fontWeight:'bold',fontSize:16},children:\"Informe seu e-mail cadastrado:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"forgotEmail\",type:\"email\",value:forgotEmail,onChange:e=>setForgotEmail(e.target.value),placeholder:\"Seu e-mail\",style:{padding:'10px 12px',fontSize:18,borderRadius:6,border:'1px solid #cbd5e1'}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12,justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{padding:'8px 20px',borderRadius:6,background:'#e0e7ff',color:'#334155',border:'none'},onClick:()=>setShowForgot(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{padding:'8px 20px',borderRadius:6,background:'#6366f1',color:'#fff',border:'none',fontWeight:'bold'},onClick:handleForgotSubmit,children:\"Recuperar\"})]}),forgotMsg&&/*#__PURE__*/_jsx(\"div\",{style:{color:forgotMsg.startsWith('E-mail')?'red':'green',marginTop:8},children:forgotMsg})]})}),loginType==='analista'||adminMode?/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:8,gap:8},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8,flex:1,background:'#fff',borderRadius:8,padding:'8px 10px',border:'1px solid #e6eef8'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:16,color:'#9aa4b2'},children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"text\",value:email,onChange:e=>setEmail(e.target.value.replace(/[^a-zA-Z0-9_.-]/g,'')),placeholder:\"Usu\\xE1rio\",\"aria-label\":\"Usu\\xE1rio analista\",style:{flex:1,padding:8,fontSize:16,border:'none',outline:'none'}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:14,color:'#94a3b8'},children:\"@ceosoftware.com.br\"})]})}):/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:8},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8,background:'#fff',borderRadius:8,padding:'8px 10px',border:'1px solid #e6eef8'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:16,color:'#9aa4b2'},children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"email\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Usu\\xE1rio\",\"aria-label\":\"E-mail do cliente\",style:{flex:1,padding:8,fontSize:16,border:'none',outline:'none'}})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:6},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8,background:'#fff',borderRadius:8,padding:'8px 10px',border:'1px solid #e6eef8'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:16,color:'#9aa4b2'},children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Senha\",value:password,onChange:e=>setPassword(e.target.value),\"aria-label\":\"Senha\",style:{flex:1,padding:8,fontSize:16,border:'none',outline:'none'}})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'right',marginTop:8},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowForgot(true),style:{background:'none',border:'none',color:'#94a3b8',cursor:'pointer',fontSize:14},children:\"Esqueci a senha\"})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{fontSize:16,padding:'12px 16px',borderRadius:12,marginTop:8,width:'100%',border:'none',cursor:'pointer',background:'linear-gradient(90deg,#0f172a,#4f46e5)',color:'#fff',fontWeight:'700',boxShadow:'0 10px 30px rgba(79,70,229,0.12)'},onMouseOver:e=>e.currentTarget.style.filter='brightness(1.06)',onMouseOut:e=>e.currentTarget.style.filter='none',children:\"Entrar\"}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginTop:8},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#475569',marginRight:8},children:\"N\\xE3o tem conta?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onRegister,style:{padding:'8px 18px',borderRadius:9999,background:'#6366f1',color:'#fff',border:'none',cursor:'pointer',fontWeight:'600'},children:\"Cadastre-se\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginTop:8},children:error})]}),adminMode&&/*#__PURE__*/_jsx(AdminLoginModalWrapper,{onLogin:onLogin,isOpen:adminMode,onClose:()=>setAdminMode(false)})]})})]});}export function AdminLoginModalWrapper(_ref2){let{onLogin,isOpen,onClose}=_ref2;const[isMobile,setIsMobile]=useState(false);const[modalPos,setModalPos]=useState(null);const[animating,setAnimating]=useState(false);const modalRef=React.useRef(null);useEffect(()=>{if(typeof window==='undefined'||typeof window.matchMedia!=='function'){setIsMobile(false);return;}const mm=window.matchMedia('(max-width: 767px)');const upd=()=>setIsMobile(mm.matches);upd();if(mm.addEventListener)mm.addEventListener('change',upd);else mm.addListener(upd);return()=>{if(mm.removeEventListener)mm.removeEventListener('change',upd);else mm.removeListener(upd);};},[]);useEffect(()=>{if(!isOpen)return;if(typeof window==='undefined')return;// prevent body from scrolling / growing while modal is open\nconst prevBodyOverflow=document.body&&document.body.style?document.body.style.overflow:'';try{if(document.body&&document.body.style)document.body.style.overflow='hidden';}catch(e){/* ignore */}// function to compute and set modal position\nconst compute=()=>{const btn=document.querySelector('button[title=\"Área administrativa\"]');if(!btn){setModalPos(null);return;}const rect=btn.getBoundingClientRect();// calculate a robust left/top so modal appears near the gear button and never goes off-screen\nconst modalMaxW=420;// same as modal maxWidth\nconst preferGap=8;const modalW=Math.min(modalMaxW,Math.round(Math.min(window.innerWidth-preferGap*2,modalMaxW)));// compute top first\nconst preferTop=Math.round(rect.bottom+preferGap);const estModalH=Math.min(Math.round(window.innerHeight*0.8),600);// estimate height\nlet topPx=preferTop;if(topPx+estModalH+preferGap>window.innerHeight){// not enough space below, try above\nconst altTop=Math.round(rect.top-estModalH-preferGap);topPx=Math.max(preferGap,altTop);}// Try to locate the login card and compute a weighted center (favor the card)\nlet cardEl=document.querySelector('div[style*=\"max-width: 440px\"]');if(!cardEl){const maybeH1=document.querySelector('h1');if(maybeH1&&maybeH1.closest)cardEl=maybeH1.closest('div');}const btnCenterX=rect.left+rect.width/2;const btnCenterY=rect.top+rect.height/2;let weightedTargetX=btnCenterX;let weightedTargetY=btnCenterY;if(cardEl){try{const cardRect=cardEl.getBoundingClientRect();const cardCenterX=cardRect.left+cardRect.width/2;const cardCenterY=cardRect.top+cardRect.height/2;// use card center as reference (center modal over the login info)\nweightedTargetX=Math.round(cardCenterX);weightedTargetY=Math.round(cardCenterY);// use estimated modal size to create an initial position, but store target for measurement pass\nconst estLeft=Math.round(weightedTargetX-modalW/2);const estTop=Math.round(weightedTargetY-estModalH/2);const clampedLeft=Math.max(preferGap,Math.min(estLeft,Math.round(window.innerWidth-modalW-preferGap)));const clampedTop=Math.max(preferGap,Math.min(estTop,Math.round(window.innerHeight-estModalH-preferGap)));// store targetX/targetY so measurement step can recalc using real modal dims\nsetModalPos({left:clampedLeft,top:clampedTop,useRight:false,targetX:weightedTargetX,targetY:weightedTargetY});return;}catch(e){// ignore and fallback to button center\n}}// Decide whether to anchor by right (better when button is near the right edge)\nconst spaceRight=Math.round(window.innerWidth-rect.right);const ADJ_X=8;// small nudge right by default\nconst ADJ_Y=-6;// small nudge up by default\nif(spaceRight<modalW+preferGap*2){// anchor by right: compute distance from viewport right edge to button right edge\nlet rightPx=Math.max(preferGap,Math.round(window.innerWidth-rect.right+preferGap));// move slightly to the right (smaller rightPx) and a bit up\nrightPx=Math.max(preferGap,rightPx-ADJ_X);const topAdj=Math.max(preferGap,topPx+ADJ_Y);// compute modal left when right-anchored\nconst modalLeft=Math.round(window.innerWidth-rightPx-modalW);const originXr=Math.round((btnCenterX-modalLeft)/modalW*100);const originYr=Math.round((btnCenterY-topAdj)/estModalH*100);const transformOriginR=\"\".concat(Math.max(10,Math.min(90,originXr)),\"% \").concat(Math.max(10,Math.min(90,originYr)),\"%\");setModalPos({right:rightPx,top:topAdj,useRight:true,transformOrigin:transformOriginR});setTimeout(()=>setAnimating(true),10);return;}// otherwise compute left anchor so modal sits near the button\nlet leftPx=Math.round(rect.right-modalW+preferGap);if(leftPx<preferGap){const leftOfButton=Math.round(rect.left-modalW-preferGap);if(leftOfButton>=preferGap)leftPx=leftOfButton;else leftPx=Math.max(preferGap,Math.min(Math.round(rect.left),Math.round(window.innerWidth-modalW-preferGap)));}// Clamp to viewport and apply small nudge so the modal centers better over the card\nleftPx=Math.max(preferGap,Math.min(leftPx+ADJ_X,Math.round(window.innerWidth-modalW-preferGap)));const topAdj=Math.max(preferGap,topPx+ADJ_Y);// compute transformOrigin for left-anchored modal (use weighted target)\nconst modalLeft2=Math.round(leftPx);const originX2=Math.round((weightedTargetX-modalLeft2)/modalW*100);const originY2=Math.round((weightedTargetY-topAdj)/estModalH*100);const transformOrigin2=\"\".concat(Math.max(10,Math.min(90,originX2)),\"% \").concat(Math.max(10,Math.min(90,originY2)),\"%\");setModalPos({left:leftPx,top:topAdj,useRight:false,transformOrigin:transformOrigin2});setTimeout(()=>setAnimating(true),10);};// initial compute\nsetAnimating(false);// measure real modal size after it's mounted (use a frame to ensure DOM updated)\nconst measureAndCompute=()=>{// compute positioning first\ncompute();// capture current button rect for use in measurement pass (avoid using `rect` from compute scope)\nconst btn=document.querySelector('button[title=\"Área administrativa\"]');const measuredRect=btn?btn.getBoundingClientRect():null;// then, if modal element exists, measure and correct the top using real height\nrequestAnimationFrame(()=>{try{const el=modalRef.current;if(el){const realH=el.offsetHeight;const realW=el.offsetWidth;// if modalPos exists and contains a stored targetX/targetY, recalc left/top exactly\nsetModalPos(prev=>{if(!prev)return prev;const preferGap=8;if(prev.targetX||prev.targetY){const tX=prev.targetX||(measuredRect?measuredRect.left+measuredRect.width/2:window.innerWidth/2);const tY=prev.targetY||(measuredRect?measuredRect.top+measuredRect.height/2:window.innerHeight/2);let newLeft=Math.round(tX-realW/2);let newTop=Math.round(tY-realH/2);newLeft=Math.max(preferGap,Math.min(newLeft,Math.round(window.innerWidth-realW-preferGap)));newTop=Math.max(preferGap,Math.min(newTop,Math.round(window.innerHeight-realH-preferGap)));// compute transformOrigin so animation looks like it's coming from the button\nconst btnCenterX=measuredRect?measuredRect.left+measuredRect.width/2:tX;const btnCenterY=measuredRect?measuredRect.top+measuredRect.height/2:tY;const originX=Math.round((btnCenterX-newLeft)/realW*100);const originY=Math.round((btnCenterY-newTop)/realH*100);const transformOrigin=\"\".concat(Math.max(10,Math.min(90,originX)),\"% \").concat(Math.max(10,Math.min(90,originY)),\"%\");const copy=_objectSpread(_objectSpread({},prev),{},{left:newLeft,top:newTop,transformOrigin});// clean target markers\ndelete copy.targetX;delete copy.targetY;return copy;}// fallback: clamp previous top using realH\nconst prevTop=prev.top||72;const clampedTop=Math.max(preferGap,Math.min(prevTop,Math.round(window.innerHeight-realH-preferGap)));return _objectSpread(_objectSpread({},prev),{},{top:clampedTop});});}}catch(e){/* ignore measurement issues */}// trigger animation after measurement\nsetTimeout(()=>setAnimating(true),12);});};measureAndCompute();// recompute on resize and scroll to keep modal anchored\nwindow.addEventListener('resize',compute);window.addEventListener('scroll',compute,{passive:true});// also observe layout changes on the button's ancestor (MutationObserver fallback)\nlet mo;try{mo=new MutationObserver(compute);const btn=document.querySelector('button[title=\"Área administrativa\"]');if(btn&&btn.parentElement)mo.observe(btn.parentElement,{attributes:true,childList:true,subtree:true});}catch(e){// ignore if MutationObserver not supported\n}return()=>{window.removeEventListener('resize',compute);window.removeEventListener('scroll',compute);if(mo)mo.disconnect();try{if(document.body&&document.body.style)document.body.style.overflow=prevBodyOverflow;}catch(e){/* ignore */}setAnimating(false);};},[isOpen]);if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',inset:0,background:'rgba(51,65,85,0.12)',zIndex:9999,overflow:'hidden'},children:isMobile?/*#__PURE__*/// centered modal for small screens\n_jsx(\"div\",{style:{position:'absolute',inset:0,display:'flex',alignItems:'center',justifyContent:'center',padding:16},children:/*#__PURE__*/_jsx(\"div\",{style:{position:'relative',background:'#fff',boxShadow:'0 6px 20px rgba(16,24,40,0.12)',borderRadius:12,minWidth:280,maxWidth:420,width:'100%',padding:'20px',zIndex:10000,transformOrigin:modalPos&&modalPos.transformOrigin?modalPos.transformOrigin:'center center',transform:animating?'translateY(0) scale(1)':'translateY(-8px) scale(0.88)',opacity:animating?1:0,transition:'transform 260ms cubic-bezier(.2,.9,.2,1), opacity 220ms ease'},children:/*#__PURE__*/_jsx(AdminLoginModal,{onLogin:onLogin,onClose:onClose})})}):/*#__PURE__*/// desktop: position modal using computed left/top to anchor near the gear button\n_jsx(\"div\",{ref:modalRef,style:{position:'fixed',top:modalPos?modalPos.top:72,left:modalPos?modalPos.left:undefined,right:modalPos?undefined:32,background:'#fff',boxShadow:'0 6px 20px rgba(16,24,40,0.12)',borderRadius:12,minWidth:320,maxWidth:420,width:'auto',padding:'20px',zIndex:10000,overflow:'hidden',transformOrigin:modalPos&&modalPos.transformOrigin?modalPos.transformOrigin:'center center',transform:animating?'translateY(0) scale(1)':'translateY(-8px) scale(0.88)',opacity:animating?1:0,transition:'transform 260ms cubic-bezier(.2,.9,.2,1), opacity 220ms ease'},children:/*#__PURE__*/_jsx(AdminLoginModal,{onLogin:onLogin,onClose:onClose})})});}export function AdminLoginModal(_ref3){let{onLogin,onClose}=_ref3;const[adminName,setAdminName]=useState('');const[adminPassword,setAdminPassword]=useState('');const[error,setError]=useState('');const[logs,setLogs]=useState([]);const[showLogs,setShowLogs]=useState(false);async function handleAdminLogin(e){e.preventDefault();setError('');const emailToValidate=\"\".concat(adminName.trim().toLowerCase(),\"@ceosoftware.com.br\");if(!adminName||!adminPassword){setError('Preencha todos os campos!');return;}if(!emailToValidate.endsWith('@ceosoftware.com.br')){setError('Somente usuários do domínio ceosoftware.com.br podem acessar.');return;}try{const pushLog=msg=>{setLogs(prev=>[...prev.slice(-9),\"\".concat(new Date().toLocaleTimeString(),\" - \").concat(msg)]);console.log('[AdminLoginModal]',msg);};pushLog(\"Enviando /api/check-type-user -> \".concat(emailToValidate));const res=await fetch('/api/check-type-user',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:emailToValidate})});pushLog(\"Status da resposta: \".concat(res.status,\" \").concat(res.statusText||''));let data=null;try{data=await res.json();}catch(err){pushLog(\"Falha ao parsear JSON da resposta: \".concat(err.message));}pushLog(\"Corpo da resposta: \".concat(data?JSON.stringify(data):'null'));if(!res.ok){const serverMsg=data&&(data.error||data.detalhe)?data.error||data.detalhe:\"(\".concat(res.status,\" \").concat(res.statusText||'',\")\");setError(serverMsg||'Erro ao verificar tipo de usuário.');return;}if(!data||!data.user_type){setError('Resposta inesperada do servidor ao verificar tipo de usuário.');return;}if(data.user_type!=='analista_admin'){setError('Somente usuários analista_admin podem acessar por este modo.');return;}pushLog(\"Enviando /login para \".concat(emailToValidate));const resLogin=await fetch('/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:emailToValidate,password:adminPassword})});const dataLogin=await resLogin.json().catch(()=>null);pushLog(\"Login status: \".concat(resLogin.status,\" \").concat(resLogin.statusText||''));if(!resLogin.ok){if(resLogin.status===401)setError('Usuário ou senha inválidos.');else if(resLogin.status===403)setError(dataLogin&&dataLogin.error?dataLogin.error:'Usuário não autorizado ou pendente de aprovação.');else setError(dataLogin&&dataLogin.error?dataLogin.error:'Erro ao fazer login.');return;}const tokenLogin=dataLogin&&dataLogin.token?dataLogin.token:null;await onLogin(emailToValidate,adminPassword,'admin',tokenLogin);}catch(err){setError('Erro ao verificar tipo de usuário.');}}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:32,borderRadius:12,background:'#fff',boxShadow:'0 2px 16px #cbd5e1',minWidth:320},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:28,marginBottom:16,color:'#334155',textAlign:'center'},children:\"Login Administrador\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAdminLogin,style:{display:'flex',flexDirection:'column',gap:16},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adminName\",style:{fontWeight:'bold',fontSize:16},children:\"Usu\\xE1rio\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:4,marginBottom:16},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',maxWidth:340},children:[/*#__PURE__*/_jsx(\"input\",{id:\"adminName\",type:\"text\",value:adminName,onChange:e=>setAdminName(e.target.value.replace(/[^a-zA-Z0-9_.-]/g,'')),placeholder:\"Usu\\xE1rio\",style:{flex:1,minWidth:0,padding:'10px 12px',fontSize:18,borderRadius:6,border:'1px solid #cbd5e1',background:'#f5f7ff',marginRight:4}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:15,color:'#64748b',background:'#f5f7ff',padding:'7px 8px',borderRadius:6,border:'1px solid #cbd5e1',whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis',maxWidth:140},children:\"@ceosoftware.com.br\"})]})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adminPassword\",style:{fontWeight:'bold',fontSize:16},children:\"Senha\"}),/*#__PURE__*/_jsx(\"input\",{id:\"adminPassword\",type:\"password\",value:adminPassword,onChange:e=>setAdminPassword(e.target.value),placeholder:\"Senha\",style:{width:'100%',padding:'10px 12px',fontSize:18,borderRadius:6,border:'1px solid #cbd5e1',background:'#f5f7ff',marginBottom:16}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12,justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{fontSize:18,padding:'8px 24px',borderRadius:6,background:'#fff',border:'1px solid #334155',color:'#334155',fontWeight:'bold',cursor:'pointer'},children:\"Entrar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:{fontSize:18,padding:'8px 24px',borderRadius:6,background:'#fff',border:'1px solid #334155',color:'#334155',cursor:'pointer'},onClick:()=>{setAdminName('');setAdminPassword('');setError('');if(onClose)onClose();},children:\"Cancelar\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginTop:8,textAlign:'center'},children:error}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12,textAlign:'center'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowLogs(s=>!s),style:{background:'none',border:'none',color:'#64748b',textDecoration:'underline',cursor:'pointer'},children:showLogs?'Ocultar logs':'Mostrar logs'})}),showLogs&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8,maxHeight:180,overflowY:'auto',background:'#0f172a',color:'#e6eef8',padding:8,borderRadius:8,fontSize:12,fontFamily:'monospace'},children:logs.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"Nenhum log ainda.\"}):logs.map((l,i)=>/*#__PURE__*/_jsx(\"div\",{children:l},i))})]});}","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","LoginScreen","_ref","onLogin","onRegister","titleOffset","setTitleOffset","showForgot","setShowForgot","forgotEmail","setForgotEmail","forgotMsg","setForgotMsg","email","setEmail","password","setPassword","error","setError","loginType","setLoginType","adminMode","setAdminMode","window","matchMedia","mm","update","matches","addEventListener","addListener","removeEventListener","removeListener","handleForgotSubmit","res","fetch","method","headers","body","JSON","stringify","data","json","catch","ok","message","status","err","handleSubmit","e","preventDefault","emailToValidate","concat","endsWith","token","style","position","display","flexDirection","alignItems","justifyContent","height","backgroundImage","backgroundBlendMode","backgroundSize","backgroundPosition","backgroundRepeat","padding","children","onClick","top","right","background","border","borderRadius","boxShadow","cursor","zIndex","title","role","fontSize","width","maxWidth","backdropFilter","transform","transition","textAlign","marginBottom","fontFamily","fontWeight","color","margin","letterSpacing","marginRight","marginTop","gap","type","onSubmit","minWidth","inset","htmlFor","id","value","onChange","target","placeholder","startsWith","flex","replace","outline","onMouseOver","currentTarget","filter","onMouseOut","AdminLoginModalWrapper","isOpen","onClose","_ref2","isMobile","setIsMobile","modalPos","setModalPos","animating","setAnimating","modalRef","useRef","upd","prevBodyOverflow","document","overflow","compute","btn","querySelector","rect","getBoundingClientRect","modalMaxW","preferGap","modalW","Math","min","round","innerWidth","preferTop","bottom","estModalH","innerHeight","topPx","altTop","max","cardEl","maybeH1","closest","btnCenterX","left","btnCenterY","weightedTargetX","weightedTargetY","cardRect","cardCenterX","cardCenterY","estLeft","estTop","clampedLeft","clampedTop","useRight","targetX","targetY","spaceRight","ADJ_X","ADJ_Y","rightPx","topAdj","modalLeft","originXr","originYr","transformOriginR","transformOrigin","setTimeout","leftPx","leftOfButton","modalLeft2","originX2","originY2","transformOrigin2","measureAndCompute","measuredRect","requestAnimationFrame","el","current","realH","offsetHeight","realW","offsetWidth","prev","tX","tY","newLeft","newTop","originX","originY","copy","_objectSpread","prevTop","passive","mo","MutationObserver","parentElement","observe","attributes","childList","subtree","disconnect","opacity","AdminLoginModal","ref","undefined","_ref3","adminName","setAdminName","adminPassword","setAdminPassword","logs","setLogs","showLogs","setShowLogs","handleAdminLogin","trim","toLowerCase","pushLog","msg","slice","Date","toLocaleTimeString","console","log","statusText","serverMsg","detalhe","user_type","resLogin","dataLogin","tokenLogin","whiteSpace","textOverflow","s","textDecoration","maxHeight","overflowY","length","map","l","i"],"sources":["C:/Users/alex/Documents/Python/CSConnect/src/components/LoginScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nexport default function LoginScreen({ onLogin, onRegister }) {\r\n  const [titleOffset, setTitleOffset] = useState(0);\r\n  const [showForgot, setShowForgot] = useState(false);\r\n  const [forgotEmail, setForgotEmail] = useState('');\r\n  const [forgotMsg, setForgotMsg] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [loginType, setLoginType] = useState('analista');\r\n  const [adminMode, setAdminMode] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined' || typeof window.matchMedia !== 'function') return;\r\n    const mm = window.matchMedia('(min-width: 768px)');\r\n    const update = () => setTitleOffset(mm.matches ? -36 : -12);\r\n    update();\r\n    if (mm.addEventListener) mm.addEventListener('change', update); else mm.addListener(update);\r\n    return () => { if (mm.removeEventListener) mm.removeEventListener('change', update); else mm.removeListener(update); };\r\n  }, []);\r\n\r\n  async function handleForgotSubmit() {\r\n    setForgotMsg('');\r\n    if (!forgotEmail) {\r\n      setForgotMsg('E-mail obrigatório.');\r\n      return;\r\n    }\r\n    try {\r\n      const res = await fetch('/api/recuperar-senha', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email: forgotEmail })\r\n      });\r\n      const data = await res.json().catch(() => null);\r\n      if (res.ok && data && data.message) setForgotMsg('Se o e-mail estiver cadastrado e autorizado, você receberá instruções para redefinir sua senha.');\r\n      else if (res.status === 404) setForgotMsg('E-mail não encontrado ou não autorizado.');\r\n      else if (data && data.error) setForgotMsg(data.error);\r\n      else setForgotMsg('Erro ao processar solicitação. Tente novamente.');\r\n    } catch (err) {\r\n      setForgotMsg('Erro ao processar solicitação. Tente novamente.');\r\n    }\r\n  }\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n    setError('');\r\n    let emailToValidate = email;\r\n    if (loginType === 'analista' || adminMode) emailToValidate = `${email}@ceosoftware.com.br`;\r\n    if (!email || !password) {\r\n      setError('Preencha todos os campos!');\r\n      return;\r\n    }\r\n    if ((loginType === 'analista' || adminMode) && !emailToValidate.endsWith('@ceosoftware.com.br')) {\r\n      setError('E-mail deve ser do domínio ceosoftware.com.br');\r\n      return;\r\n    }\r\n    if (adminMode && emailToValidate !== 'admin@ceosoftware.com.br') {\r\n      setError('Somente o administrador pode acessar por este modo.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch('/login', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email: emailToValidate, password })\r\n      });\r\n      const data = await res.json().catch(() => null);\r\n      if (!res.ok) {\r\n        if (res.status === 401) setError('Usuário ou senha inválidos.');\r\n        else if (res.status === 403) setError((data && data.error) || 'Usuário não autorizado ou pendente de aprovação.');\r\n        else setError((data && data.error) || 'Erro ao fazer login.');\r\n        return;\r\n      }\r\n      const token = data && data.token ? data.token : null;\r\n      await onLogin(emailToValidate, password, adminMode ? 'admin' : loginType, token);\r\n    } catch (err) {\r\n      setError(err.message || 'Erro ao fazer login.');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'relative',\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      height: '100vh',\r\n      backgroundImage: \"linear-gradient(180deg, rgba(15,23,42,0.88), rgba(79,70,229,0.72)), url('/assets/background.jpg')\",\r\n      backgroundBlendMode: 'overlay',\r\n      backgroundSize: 'cover',\r\n      backgroundPosition: 'center',\r\n      backgroundRepeat: 'no-repeat',\r\n      padding: 20\r\n    }}>\r\n      {/* botão de administração permanece no DOM para que possamos posicionar o modal em relação a ele */}\r\n      <button\r\n        onClick={() => setAdminMode(true)}\r\n        style={{\r\n          position: 'absolute', top: 32, right: 32,\r\n          background: adminMode ? '#c7d2fe' : '#e0e7ff',\r\n          border: 'none', borderRadius: 8, padding: 10,\r\n          boxShadow: adminMode ? '0 4px 12px rgba(99,102,241,0.18)' : '0 2px 8px #cbd5e1',\r\n          cursor: 'pointer', zIndex: 101,\r\n          display: 'flex', alignItems: 'center', justifyContent: 'center'\r\n        }}\r\n        title=\"Área administrativa\"\r\n        aria-expanded={adminMode}\r\n      >\r\n        <span role=\"img\" aria-label=\"admin\" style={{ fontSize: 22 }}>⚙️</span>\r\n      </button>\r\n\r\n      <div style={{ width: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n        <div style={{ width: '100%', maxWidth: 440, background: 'rgba(255,255,255,0.92)', padding: 28, borderRadius: 16, boxShadow: '0 8px 24px rgba(16,24,40,0.08)', backdropFilter: 'blur(6px)' }}>\r\n          <div style={{ transform: `translateY(${titleOffset}px)`, transition: 'transform 220ms ease', textAlign: 'center', marginBottom: 6 }}>\r\n            <h1 style={{ fontFamily: 'Segoe UI, Arial, sans-serif', fontWeight: 900, fontSize: 36, color: '#0f172a', margin: 0, letterSpacing: 1 }}>\r\n              <span style={{ marginRight: 8 }}>🔗</span>CSConnect\r\n            </h1>\r\n            <div style={{ fontFamily: 'Segoe UI, Arial, sans-serif', fontWeight: 500, fontSize: 14, color: '#9aa4b2', marginTop: 6 }}>by CEOsoftware</div>\r\n          </div>\r\n\r\n          <div style={{ display: 'flex', gap: 8, marginBottom: 16, justifyContent: 'center' }}>\r\n            <button type=\"button\" onClick={() => setLoginType('analista')} style={{ padding: '8px 18px', borderRadius: 9999, border: 'none', cursor: 'pointer', fontWeight: loginType === 'analista' ? '700' : '500', background: loginType === 'analista' ? 'linear-gradient(90deg,#4f46e5,#6366f1)' : '#f1f5f9', color: loginType === 'analista' ? '#fff' : '#475569', boxShadow: loginType === 'analista' ? '0 6px 18px rgba(79,70,229,0.16)' : 'none' }}>Analista</button>\r\n            <button type=\"button\" onClick={() => setLoginType('cliente')} style={{ padding: '8px 18px', borderRadius: 9999, border: 'none', cursor: 'pointer', fontWeight: loginType === 'cliente' ? '700' : '500', background: loginType === 'cliente' ? 'linear-gradient(90deg,#4f46e5,#6366f1)' : '#f1f5f9', color: loginType === 'cliente' ? '#fff' : '#475569', boxShadow: loginType === 'cliente' ? '0 6px 18px rgba(79,70,229,0.16)' : 'none' }}>Cliente</button>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: 14, minWidth: 280 }}>\r\n            {showForgot && (\r\n              <div style={{ position: 'fixed', inset: 0, background: 'rgba(51,65,85,0.15)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 10 }}>\r\n                <div style={{ background: '#fff', padding: 32, borderRadius: 12, boxShadow: '0 2px 16px #cbd5e1', minWidth: 320, display: 'flex', flexDirection: 'column', gap: 16 }}>\r\n                  <h3 style={{ margin: 0, fontSize: 22, color: '#334155' }}>Recuperar senha</h3>\r\n                  <label htmlFor=\"forgotEmail\" style={{ fontWeight: 'bold', fontSize: 16 }}>Informe seu e-mail cadastrado:</label>\r\n                  <input id=\"forgotEmail\" type=\"email\" value={forgotEmail} onChange={e => setForgotEmail(e.target.value)} placeholder=\"Seu e-mail\" style={{ padding: '10px 12px', fontSize: 18, borderRadius: 6, border: '1px solid #cbd5e1' }} />\r\n                  <div style={{ display: 'flex', gap: 12, justifyContent: 'flex-end' }}>\r\n                    <button type=\"button\" style={{ padding: '8px 20px', borderRadius: 6, background: '#e0e7ff', color: '#334155', border: 'none' }} onClick={() => setShowForgot(false)}>Cancelar</button>\r\n                    <button type=\"button\" style={{ padding: '8px 20px', borderRadius: 6, background: '#6366f1', color: '#fff', border: 'none', fontWeight: 'bold' }} onClick={handleForgotSubmit}>Recuperar</button>\r\n                  </div>\r\n                  {forgotMsg && <div style={{ color: forgotMsg.startsWith('E-mail') ? 'red' : 'green', marginTop: 8 }}>{forgotMsg}</div>}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {(loginType === 'analista' || adminMode) ? (\r\n              <div style={{ display: 'flex', alignItems: 'center', marginBottom: 8, gap: 8 }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 8, flex: 1, background: '#fff', borderRadius: 8, padding: '8px 10px', border: '1px solid #e6eef8' }}>\r\n                  <span style={{ fontSize: 16, color: '#9aa4b2' }}>👤</span>\r\n                  <input id=\"email\" type=\"text\" value={email} onChange={e => setEmail(e.target.value.replace(/[^a-zA-Z0-9_.-]/g, ''))} placeholder=\"Usuário\" aria-label=\"Usuário analista\" style={{ flex: 1, padding: 8, fontSize: 16, border: 'none', outline: 'none' }} />\r\n                  <span style={{ fontSize: 14, color: '#94a3b8' }}>@ceosoftware.com.br</span>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div style={{ marginBottom: 8 }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 8, background: '#fff', borderRadius: 8, padding: '8px 10px', border: '1px solid #e6eef8' }}>\r\n                  <span style={{ fontSize: 16, color: '#9aa4b2' }}>👤</span>\r\n                  <input id=\"email\" type=\"email\" value={email} onChange={e => setEmail(e.target.value)} placeholder=\"Usuário\" aria-label=\"E-mail do cliente\" style={{ flex: 1, padding: 8, fontSize: 16, border: 'none', outline: 'none' }} />\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div style={{ marginBottom: 6 }}>\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: 8, background: '#fff', borderRadius: 8, padding: '8px 10px', border: '1px solid #e6eef8' }}>\r\n                <span style={{ fontSize: 16, color: '#9aa4b2' }}>🔒</span>\r\n                <input type=\"password\" placeholder=\"Senha\" value={password} onChange={e => setPassword(e.target.value)} aria-label=\"Senha\" style={{ flex: 1, padding: 8, fontSize: 16, border: 'none', outline: 'none' }} />\r\n              </div>\r\n              <div style={{ textAlign: 'right', marginTop: 8 }}>\r\n                <button type=\"button\" onClick={() => setShowForgot(true)} style={{ background: 'none', border: 'none', color: '#94a3b8', cursor: 'pointer', fontSize: 14 }}>Esqueci a senha</button>\r\n              </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" style={{ fontSize: 16, padding: '12px 16px', borderRadius: 12, marginTop: 8, width: '100%', border: 'none', cursor: 'pointer', background: 'linear-gradient(90deg,#0f172a,#4f46e5)', color: '#fff', fontWeight: '700', boxShadow: '0 10px 30px rgba(79,70,229,0.12)' }} onMouseOver={e => e.currentTarget.style.filter = 'brightness(1.06)'} onMouseOut={e => e.currentTarget.style.filter = 'none'}>Entrar</button>\r\n\r\n            <div style={{ textAlign: 'center', marginTop: 8 }}>\r\n              <span style={{ color: '#475569', marginRight: 8 }}>Não tem conta?</span>\r\n              <button onClick={onRegister} style={{ padding: '8px 18px', borderRadius: 9999, background: '#6366f1', color: '#fff', border: 'none', cursor: 'pointer', fontWeight: '600' }}>Cadastre-se</button>\r\n            </div>\r\n\r\n            {error && <div style={{ color: 'red', marginTop: 8 }}>{error}</div>}\r\n          </form>\r\n\r\n          {adminMode && <AdminLoginModalWrapper onLogin={onLogin} isOpen={adminMode} onClose={() => setAdminMode(false)} />}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function AdminLoginModalWrapper({ onLogin, isOpen, onClose }) {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [modalPos, setModalPos] = useState(null);\r\n  const [animating, setAnimating] = useState(false);\r\n  const modalRef = React.useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined' || typeof window.matchMedia !== 'function') {\r\n      setIsMobile(false);\r\n      return;\r\n    }\r\n    const mm = window.matchMedia('(max-width: 767px)');\r\n    const upd = () => setIsMobile(mm.matches);\r\n    upd();\r\n    if (mm.addEventListener) mm.addEventListener('change', upd); else mm.addListener(upd);\r\n    return () => { if (mm.removeEventListener) mm.removeEventListener('change', upd); else mm.removeListener(upd); };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    if (typeof window === 'undefined') return;\r\n    // prevent body from scrolling / growing while modal is open\r\n    const prevBodyOverflow = document.body && document.body.style ? document.body.style.overflow : '';\r\n    try { if (document.body && document.body.style) document.body.style.overflow = 'hidden'; } catch (e) { /* ignore */ }\r\n    // function to compute and set modal position\r\n    const compute = () => {\r\n      const btn = document.querySelector('button[title=\"Área administrativa\"]');\r\n      if (!btn) {\r\n        setModalPos(null);\r\n        return;\r\n      }\r\n      const rect = btn.getBoundingClientRect();\r\n      // calculate a robust left/top so modal appears near the gear button and never goes off-screen\r\n      const modalMaxW = 420; // same as modal maxWidth\r\n      const preferGap = 8;\r\n      const modalW = Math.min(modalMaxW, Math.round(Math.min(window.innerWidth - preferGap * 2, modalMaxW)));\r\n\r\n      // compute top first\r\n      const preferTop = Math.round(rect.bottom + preferGap);\r\n      const estModalH = Math.min(Math.round(window.innerHeight * 0.8), 600); // estimate height\r\n      let topPx = preferTop;\r\n      if (topPx + estModalH + preferGap > window.innerHeight) {\r\n        // not enough space below, try above\r\n        const altTop = Math.round(rect.top - estModalH - preferGap);\r\n        topPx = Math.max(preferGap, altTop);\r\n      }\r\n\r\n      // Try to locate the login card and compute a weighted center (favor the card)\r\n      let cardEl = document.querySelector('div[style*=\"max-width: 440px\"]');\r\n      if (!cardEl) {\r\n        const maybeH1 = document.querySelector('h1');\r\n        if (maybeH1 && maybeH1.closest) cardEl = maybeH1.closest('div');\r\n      }\r\n      const btnCenterX = rect.left + rect.width / 2;\r\n      const btnCenterY = rect.top + rect.height / 2;\r\n      let weightedTargetX = btnCenterX;\r\n      let weightedTargetY = btnCenterY;\r\n      if (cardEl) {\r\n        try {\r\n          const cardRect = cardEl.getBoundingClientRect();\r\n          const cardCenterX = cardRect.left + cardRect.width / 2;\r\n          const cardCenterY = cardRect.top + cardRect.height / 2;\r\n          // use card center as reference (center modal over the login info)\r\n          weightedTargetX = Math.round(cardCenterX);\r\n          weightedTargetY = Math.round(cardCenterY);\r\n\r\n          // use estimated modal size to create an initial position, but store target for measurement pass\r\n          const estLeft = Math.round(weightedTargetX - modalW / 2);\r\n          const estTop = Math.round(weightedTargetY - estModalH / 2);\r\n          const clampedLeft = Math.max(preferGap, Math.min(estLeft, Math.round(window.innerWidth - modalW - preferGap)));\r\n          const clampedTop = Math.max(preferGap, Math.min(estTop, Math.round(window.innerHeight - estModalH - preferGap)));\r\n          // store targetX/targetY so measurement step can recalc using real modal dims\r\n          setModalPos({ left: clampedLeft, top: clampedTop, useRight: false, targetX: weightedTargetX, targetY: weightedTargetY });\r\n          return;\r\n        } catch (e) {\r\n          // ignore and fallback to button center\r\n        }\r\n      }\r\n\r\n      // Decide whether to anchor by right (better when button is near the right edge)\r\n      const spaceRight = Math.round(window.innerWidth - rect.right);\r\n      const ADJ_X = 8; // small nudge right by default\r\n      const ADJ_Y = -6; // small nudge up by default\r\n      if (spaceRight < modalW + preferGap * 2) {\r\n        // anchor by right: compute distance from viewport right edge to button right edge\r\n        let rightPx = Math.max(preferGap, Math.round(window.innerWidth - rect.right + preferGap));\r\n        // move slightly to the right (smaller rightPx) and a bit up\r\n        rightPx = Math.max(preferGap, rightPx - ADJ_X);\r\n        const topAdj = Math.max(preferGap, topPx + ADJ_Y);\r\n  // compute modal left when right-anchored\r\n  const modalLeft = Math.round(window.innerWidth - rightPx - modalW);\r\n  const originXr = Math.round(((btnCenterX - modalLeft) / modalW) * 100);\r\n  const originYr = Math.round(((btnCenterY - topAdj) / estModalH) * 100);\r\n        const transformOriginR = `${Math.max(10, Math.min(90, originXr))}% ${Math.max(10, Math.min(90, originYr))}%`;\r\n        setModalPos({ right: rightPx, top: topAdj, useRight: true, transformOrigin: transformOriginR });\r\n        setTimeout(() => setAnimating(true), 10);\r\n        return;\r\n      }\r\n\r\n      // otherwise compute left anchor so modal sits near the button\r\n      let leftPx = Math.round(rect.right - modalW + preferGap);\r\n      if (leftPx < preferGap) {\r\n        const leftOfButton = Math.round(rect.left - modalW - preferGap);\r\n        if (leftOfButton >= preferGap) leftPx = leftOfButton;\r\n        else leftPx = Math.max(preferGap, Math.min(Math.round(rect.left), Math.round(window.innerWidth - modalW - preferGap)));\r\n      }\r\n  // Clamp to viewport and apply small nudge so the modal centers better over the card\r\n  leftPx = Math.max(preferGap, Math.min(leftPx + ADJ_X, Math.round(window.innerWidth - modalW - preferGap)));\r\n  const topAdj = Math.max(preferGap, topPx + ADJ_Y);\r\n  // compute transformOrigin for left-anchored modal (use weighted target)\r\n  const modalLeft2 = Math.round(leftPx);\r\n  const originX2 = Math.round(((weightedTargetX - modalLeft2) / modalW) * 100);\r\n  const originY2 = Math.round(((weightedTargetY - topAdj) / estModalH) * 100);\r\n  const transformOrigin2 = `${Math.max(10, Math.min(90, originX2))}% ${Math.max(10, Math.min(90, originY2))}%`;\r\n  setModalPos({ left: leftPx, top: topAdj, useRight: false, transformOrigin: transformOrigin2 });\r\n  setTimeout(() => setAnimating(true), 10);\r\n    };\r\n\r\n    // initial compute\r\n    setAnimating(false);\r\n    // measure real modal size after it's mounted (use a frame to ensure DOM updated)\r\n    const measureAndCompute = () => {\r\n      // compute positioning first\r\n      compute();\r\n      // capture current button rect for use in measurement pass (avoid using `rect` from compute scope)\r\n      const btn = document.querySelector('button[title=\"Área administrativa\"]');\r\n      const measuredRect = btn ? btn.getBoundingClientRect() : null;\r\n      // then, if modal element exists, measure and correct the top using real height\r\n      requestAnimationFrame(() => {\r\n        try {\r\n          const el = modalRef.current;\r\n          if (el) {\r\n            const realH = el.offsetHeight;\r\n            const realW = el.offsetWidth;\r\n            // if modalPos exists and contains a stored targetX/targetY, recalc left/top exactly\r\n            setModalPos(prev => {\r\n              if (!prev) return prev;\r\n              const preferGap = 8;\r\n              if (prev.targetX || prev.targetY) {\r\n                const tX = prev.targetX || (measuredRect ? (measuredRect.left + measuredRect.width / 2) : (window.innerWidth / 2));\r\n                const tY = prev.targetY || (measuredRect ? (measuredRect.top + measuredRect.height / 2) : (window.innerHeight / 2));\r\n                let newLeft = Math.round(tX - realW / 2);\r\n                let newTop = Math.round(tY - realH / 2);\r\n                newLeft = Math.max(preferGap, Math.min(newLeft, Math.round(window.innerWidth - realW - preferGap)));\r\n                newTop = Math.max(preferGap, Math.min(newTop, Math.round(window.innerHeight - realH - preferGap)));\r\n                // compute transformOrigin so animation looks like it's coming from the button\r\n                const btnCenterX = measuredRect ? (measuredRect.left + measuredRect.width / 2) : (tX);\r\n                const btnCenterY = measuredRect ? (measuredRect.top + measuredRect.height / 2) : (tY);\r\n                const originX = Math.round(((btnCenterX - newLeft) / realW) * 100);\r\n                const originY = Math.round(((btnCenterY - newTop) / realH) * 100);\r\n                const transformOrigin = `${Math.max(10, Math.min(90, originX))}% ${Math.max(10, Math.min(90, originY))}%`;\r\n                const copy = { ...prev, left: newLeft, top: newTop, transformOrigin };\r\n                // clean target markers\r\n                delete copy.targetX; delete copy.targetY;\r\n                return copy;\r\n              }\r\n              // fallback: clamp previous top using realH\r\n              const prevTop = prev.top || 72;\r\n              const clampedTop = Math.max(preferGap, Math.min(prevTop, Math.round(window.innerHeight - realH - preferGap)));\r\n              return { ...prev, top: clampedTop };\r\n            });\r\n          }\r\n        } catch (e) { /* ignore measurement issues */ }\r\n        // trigger animation after measurement\r\n        setTimeout(() => setAnimating(true), 12);\r\n      });\r\n    };\r\n    measureAndCompute();\r\n    // recompute on resize and scroll to keep modal anchored\r\n    window.addEventListener('resize', compute);\r\n    window.addEventListener('scroll', compute, { passive: true });\r\n    // also observe layout changes on the button's ancestor (MutationObserver fallback)\r\n    let mo;\r\n    try {\r\n      mo = new MutationObserver(compute);\r\n      const btn = document.querySelector('button[title=\"Área administrativa\"]');\r\n      if (btn && btn.parentElement) mo.observe(btn.parentElement, { attributes: true, childList: true, subtree: true });\r\n    } catch (e) {\r\n      // ignore if MutationObserver not supported\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', compute);\r\n      window.removeEventListener('scroll', compute);\r\n      if (mo) mo.disconnect();\r\n      try { if (document.body && document.body.style) document.body.style.overflow = prevBodyOverflow; } catch (e) { /* ignore */ }\r\n      setAnimating(false);\r\n    };\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n  return (\r\n    <div style={{ position: 'fixed', inset: 0, background: 'rgba(51,65,85,0.12)', zIndex: 9999, overflow: 'hidden' }}>\r\n      {isMobile ? (\r\n        // centered modal for small screens\r\n        <div style={{ position: 'absolute', inset: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', padding: 16 }}>\r\n          <div\r\n            style={{\r\n              position: 'relative',\r\n              background: '#fff',\r\n              boxShadow: '0 6px 20px rgba(16,24,40,0.12)',\r\n              borderRadius: 12,\r\n              minWidth: 280,\r\n              maxWidth: 420,\r\n              width: '100%',\r\n              padding: '20px',\r\n              zIndex: 10000,\r\n              transformOrigin: modalPos && modalPos.transformOrigin ? modalPos.transformOrigin : 'center center',\r\n              transform: animating ? 'translateY(0) scale(1)' : 'translateY(-8px) scale(0.88)',\r\n              opacity: animating ? 1 : 0,\r\n              transition: 'transform 260ms cubic-bezier(.2,.9,.2,1), opacity 220ms ease'\r\n            }}\r\n          >\r\n            <AdminLoginModal onLogin={onLogin} onClose={onClose} />\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        // desktop: position modal using computed left/top to anchor near the gear button\r\n        <div\r\n          ref={modalRef}\r\n          style={{\r\n            position: 'fixed',\r\n            top: modalPos ? modalPos.top : 72,\r\n            left: modalPos ? modalPos.left : undefined,\r\n            right: modalPos ? undefined : 32,\r\n            background: '#fff',\r\n            boxShadow: '0 6px 20px rgba(16,24,40,0.12)',\r\n            borderRadius: 12,\r\n            minWidth: 320,\r\n            maxWidth: 420,\r\n            width: 'auto',\r\n            padding: '20px',\r\n            zIndex: 10000,\r\n            overflow: 'hidden',\r\n            transformOrigin: modalPos && modalPos.transformOrigin ? modalPos.transformOrigin : 'center center',\r\n            transform: animating ? 'translateY(0) scale(1)' : 'translateY(-8px) scale(0.88)',\r\n            opacity: animating ? 1 : 0,\r\n            transition: 'transform 260ms cubic-bezier(.2,.9,.2,1), opacity 220ms ease'\r\n          }}\r\n        >\r\n          <AdminLoginModal onLogin={onLogin} onClose={onClose} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function AdminLoginModal({ onLogin, onClose }) {\r\n  const [adminName, setAdminName] = useState('');\r\n  const [adminPassword, setAdminPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [logs, setLogs] = useState([]);\r\n  const [showLogs, setShowLogs] = useState(false);\r\n\r\n  async function handleAdminLogin(e) {\r\n    e.preventDefault();\r\n    setError('');\r\n    const emailToValidate = `${adminName.trim().toLowerCase()}@ceosoftware.com.br`;\r\n    if (!adminName || !adminPassword) {\r\n      setError('Preencha todos os campos!');\r\n      return;\r\n    }\r\n    if (!emailToValidate.endsWith('@ceosoftware.com.br')) {\r\n      setError('Somente usuários do domínio ceosoftware.com.br podem acessar.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const pushLog = (msg) => { setLogs(prev => [...prev.slice(-9), `${new Date().toLocaleTimeString()} - ${msg}`]); console.log('[AdminLoginModal]', msg); };\r\n      pushLog(`Enviando /api/check-type-user -> ${emailToValidate}`);\r\n      const res = await fetch('/api/check-type-user', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ email: emailToValidate }) });\r\n      pushLog(`Status da resposta: ${res.status} ${res.statusText || ''}`);\r\n      let data = null;\r\n      try { data = await res.json(); } catch (err) { pushLog(`Falha ao parsear JSON da resposta: ${err.message}`); }\r\n      pushLog(`Corpo da resposta: ${data ? JSON.stringify(data) : 'null'}`);\r\n\r\n      if (!res.ok) { const serverMsg = data && (data.error || data.detalhe) ? (data.error || data.detalhe) : `(${res.status} ${res.statusText || ''})`; setError(serverMsg || 'Erro ao verificar tipo de usuário.'); return; }\r\n      if (!data || !data.user_type) { setError('Resposta inesperada do servidor ao verificar tipo de usuário.'); return; }\r\n      if (data.user_type !== 'analista_admin') { setError('Somente usuários analista_admin podem acessar por este modo.'); return; }\r\n\r\n      pushLog(`Enviando /login para ${emailToValidate}`);\r\n      const resLogin = await fetch('/login', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ email: emailToValidate, password: adminPassword }) });\r\n      const dataLogin = await resLogin.json().catch(() => null);\r\n      pushLog(`Login status: ${resLogin.status} ${resLogin.statusText || ''}`);\r\n      if (!resLogin.ok) {\r\n        if (resLogin.status === 401) setError('Usuário ou senha inválidos.');\r\n        else if (resLogin.status === 403) setError(dataLogin && dataLogin.error ? dataLogin.error : 'Usuário não autorizado ou pendente de aprovação.');\r\n        else setError(dataLogin && dataLogin.error ? dataLogin.error : 'Erro ao fazer login.');\r\n        return;\r\n      }\r\n      const tokenLogin = dataLogin && dataLogin.token ? dataLogin.token : null;\r\n      await onLogin(emailToValidate, adminPassword, 'admin', tokenLogin);\r\n    } catch (err) {\r\n      setError('Erro ao verificar tipo de usuário.');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: 32, borderRadius: 12, background: '#fff', boxShadow: '0 2px 16px #cbd5e1', minWidth: 320 }}>\r\n      <h2 style={{ fontSize: 28, marginBottom: 16, color: '#334155', textAlign: 'center' }}>Login Administrador</h2>\r\n      <form onSubmit={handleAdminLogin} style={{ display: 'flex', flexDirection: 'column', gap: 16 }}>\r\n        <label htmlFor=\"adminName\" style={{ fontWeight: 'bold', fontSize: 16 }}>Usuário</label>\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: 4, marginBottom: 16 }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', maxWidth: 340 }}>\r\n            <input id=\"adminName\" type=\"text\" value={adminName} onChange={e => setAdminName(e.target.value.replace(/[^a-zA-Z0-9_.-]/g, ''))} placeholder=\"Usuário\" style={{ flex: 1, minWidth: 0, padding: '10px 12px', fontSize: 18, borderRadius: 6, border: '1px solid #cbd5e1', background: '#f5f7ff', marginRight: 4 }} />\r\n            <span style={{ fontSize: 15, color: '#64748b', background: '#f5f7ff', padding: '7px 8px', borderRadius: 6, border: '1px solid #cbd5e1', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis', maxWidth: 140 }}>@ceosoftware.com.br</span>\r\n          </div>\r\n        </div>\r\n        <label htmlFor=\"adminPassword\" style={{ fontWeight: 'bold', fontSize: 16 }}>Senha</label>\r\n        <input id=\"adminPassword\" type=\"password\" value={adminPassword} onChange={e => setAdminPassword(e.target.value)} placeholder=\"Senha\" style={{ width: '100%', padding: '10px 12px', fontSize: 18, borderRadius: 6, border: '1px solid #cbd5e1', background: '#f5f7ff', marginBottom: 16 }} />\r\n        <div style={{ display: 'flex', gap: 12, justifyContent: 'center' }}>\r\n          <button type=\"submit\" style={{ fontSize: 18, padding: '8px 24px', borderRadius: 6, background: '#fff', border: '1px solid #334155', color: '#334155', fontWeight: 'bold', cursor: 'pointer' }}>Entrar</button>\r\n          <button type=\"button\" style={{ fontSize: 18, padding: '8px 24px', borderRadius: 6, background: '#fff', border: '1px solid #334155', color: '#334155', cursor: 'pointer' }} onClick={() => { setAdminName(''); setAdminPassword(''); setError(''); if (onClose) onClose(); }}>Cancelar</button>\r\n        </div>\r\n      </form>\r\n      {error && <div style={{ color: 'red', marginTop: 8, textAlign: 'center' }}>{error}</div>}\r\n      <div style={{ marginTop: 12, textAlign: 'center' }}>\r\n        <button onClick={() => setShowLogs(s => !s)} style={{ background: 'none', border: 'none', color: '#64748b', textDecoration: 'underline', cursor: 'pointer' }}>{showLogs ? 'Ocultar logs' : 'Mostrar logs'}</button>\r\n      </div>\r\n      {showLogs && (\r\n        <div style={{ marginTop: 8, maxHeight: 180, overflowY: 'auto', background: '#0f172a', color: '#e6eef8', padding: 8, borderRadius: 8, fontSize: 12, fontFamily: 'monospace' }}>\r\n          {logs.length === 0 ? <div>Nenhum log ainda.</div> : logs.map((l, i) => <div key={i}>{l}</div>)}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}